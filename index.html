<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:image" content="https://mir-s3-cdn-cf.behance.net/projects/404/1ceffe120087597.Y3JvcCw4MDgsNjMyLDAsMA.jpg">
    <meta name="description" content="Just TicTacToe">
    <title>TicTacToe</title>
  </head>
  <body>
    <div class="mainContainer">
        <div class="game">
            <div class="boxes">
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
                <div class="box"><span class="XO"></span></div>
            </div>
        </div>
        <div class="results">
            <div id="resultsOfXDiv">X: <span id="resultsOfX">0</span>&nbsp;&nbsp;&nbsp;</div>
            <div id="resultsOfODiv">&nbsp;&nbsp;&nbsp;<span id="resultsOfO">0</span> :O</div>
        </div>
        <div class="butns">
            <button onclick="reset()"">Restart Round</button>
            <button onclick="restart()"">Restart Game</button>
        </div>
    </div>
  </body>
  <style>
    :root{
        --background-color: #703B1B;
        --button-color: #321004;
        --Xcolor: #242321;
        --height: 80vh;
        --boxHeight: 1px;
        --fontSizeBox: 1px;
        --fontSizeResults: 1px;
        --fontSizeButtons: 1px;
    }
    body{
        margin: 30px;
        background-color: var(--background-color);
    }
    .butns{
        width: 30%;
        margin: 0 auto;
        display: flex;
        align-content: center;
        flex-direction: column;
    }
    button{
        cursor: pointer;
        background-color: var(--button-color);
        font-size: var(--fontSizeButtons);
        border: none;
        border-radius: 5px;
        margin: 1%;
        white-space: nowrap;
        color: #E9D6C8;
        box-shadow: rgba(0, 0, 0, 0.19) 0px 10px 20px, rgba(0, 0, 0, 0.23) 0px 6px 6px;
        transition: 0.2s;
    }
    button:hover{
        background: linear-gradient(90deg,#703B1B,#744527);
    }
    #resultsOfO{
        color: #BED4E1;
    }
    #resultsOfX{
        color: #BED4E1;
    }
    .results {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 7px auto;
        font-weight: 500;
        width: 50%;
        font-size: var(--fontSizeResults);
        height: 40px;
        color: white;
    }
    .game {
        box-shadow: rgba(110, 40, 5, 0.5) -5px 5px, rgba(131, 137, 8, 0.4) -10px 10px, rgba(166, 63, 12, 0.3) -15px 15px, rgba(29, 116, 7, 0.2) -20px 20px, rgba(9, 1, 61, 0.1) -25px 25px;
        box-shadow: rgba(215,179,155, 0.4) -5px 5px, rgba(215,179,155, 0.3) -10px 10px, rgba(215,179,155, 0.2) -15px 15px, rgba(215,179,155, 0.1) -20px 20px, rgba(215,179,155, 0.05) -25px 25px;
        background-color: #E9D6C8;
        border-radius: 5px;
        padding: 10px;
        width: 35%;
        height: var(--height);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 25px auto;
        /* transition: 0.7s; */
    }
    .boxes {
        margin: 10px;
        display: grid;
        grid-template: repeat(3, 1fr) / repeat(3, 1fr);
        width: 90%;
        height: var(--boxHeight);
    }
    .box {
        color: var(--Xcolor);
        border: 1px solid black;
        box-shadow: rgba(50, 50, 93, 0.2) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.2) 0px 18px 36px -18px inset;
        font-size: var(--fontSizeBox);
        background-color: #BED4E1;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 7px;
    }
    /* .test{
        visibility: hidden;
        position: relative;
    } */
    /*     .box:nth-child(1) > .XO{
        visibility: hidden;
        position: relative;
    }
    .box:nth-child(1) > .XO::after{
        visibility: visible;
        position: absolute;
        top: 0;
	    left: 0;
        content: "1";
    } */
    .divTextAnimation {
        animation: forwards textRes .8s;
    }
    .divAnimation {
        animation: res 1s;
        /* -webkit-animation-delay: 0s; */
        /* -webkit-animation-timing-function: ease; */
    }
    @keyframes res {
        40%{
            transform: scale(1.1);
            opacity: 0;
        }
    }
    @keyframes textRes{
        100%{
            opacity: 0;
        }
    }
    /* 
    '@keyframes textRes {'
                            '40% {'
                                'visibility: visible;'
                                'position: absolute;'
                                'top: 0;'
                                'left: 0;'
                                'content: "";'
                            '}'
                        '}';
    */
    @media (max-width: 700px){
        .mainContainer{
            margin-top: 150px;
            transform: scale(1.7);
        }
    }
    </style>
</html>
<script>
    resizeBoard();
    window.addEventListener("resize",resizeBoard);
    function resizeBoard() {
        const gameVw = document.getElementsByClassName("game")[0].offsetWidth;
        document.documentElement.style.setProperty('--height',gameVw + 'px');
        const boxesW = document.getElementsByClassName("boxes")[0].offsetWidth;
        document.documentElement.style.setProperty("--boxHeight",boxesW + 'px');
        const boxW = document.getElementsByClassName("box")[0].offsetWidth;
        document.documentElement.style.setProperty("--fontSizeBox",boxW*45/100+'px');
        const resultsW = document.getElementsByClassName("results")[0].offsetWidth;
        document.documentElement.style.setProperty("--fontSizeResults",resultsW*6/100+'px');
        const butnsW = document.getElementsByClassName("butns")[0].offsetWidth;
        document.documentElement.style.setProperty("--fontSizeButtons",butnsW*10/100+'px');
    }

    let box = document.querySelectorAll(".box");
    let divText = document.getElementsByClassName('XO');
    let x=0,o=0;
    gameBoard();
    
    function gameBoard() { // runs whole mechanism
        let cnt=0;
        for(let i=0;i<box.length;i++) {
            box[i].addEventListener("click",function () {
                if(divText[i].innerText!='X'&&divText[i].innerText!='O'){
                    if(cnt%2===0) 
                        divText[i].innerText="X";
                    else 
                        divText[i].innerText="O";
                    cnt++;
                    if(checker()) { // if checker returns true then someone has won
                        result(cnt); 
                        if(cnt%2==0) cnt=1;
                        else cnt=0;
                    }
                }
                if(pssblSquare()===false) {alert("Its a draw");reset();} 
            });
        }
    }
    function checker() { // checks ;D
        if(divText[0].textContent!==''&&divText[0].textContent===divText[1].textContent&&divText[0].textContent===divText[2].textContent) return true;
        if(divText[3].textContent!==''&&divText[3].textContent===divText[4].textContent&&divText[3].textContent===divText[5].textContent) return true;
        if(divText[6].textContent!==''&&divText[6].textContent===divText[7].textContent&&divText[6].textContent===divText[8].textContent) return true;
        if(divText[0].textContent!==''&&divText[0].textContent===divText[3].textContent&&divText[0].textContent===divText[6].textContent) return true;
        if(divText[1].textContent!==''&&divText[1].textContent===divText[4].textContent&&divText[1].textContent===divText[7].textContent) return true;
        if(divText[2].textContent!==''&&divText[2].textContent===divText[5].textContent&&divText[2].textContent===divText[8].textContent) return true;
        if(divText[0].textContent!==''&&divText[0].textContent===divText[4].textContent&&divText[0].textContent===divText[8].textContent) return true;
        if(divText[2].textContent!==''&&divText[2].textContent===divText[4].textContent&&divText[2].textContent===divText[6].textContent) return true;
        return false;
    } 
    function result(cnt) {
        if(cnt%2==0) {
            // "O" winner
            let resultsO = document.querySelector("#resultsOfO");
            o++;
            resultsO.innerText=o;
            document.getElementById("resultsOfXDiv").style.transform="scale(1.0)";
            /* document.getElementById("resultsOfXDiv").style.color="black";
            document.getElementById("resultsOfODiv").style.color="darkgreen"; */
            document.getElementById("resultsOfODiv").style.transform="scale(1.3)";
            alert("Winner Is: O");
            reset();
        }else {
            // "X" winner
            let resultsX = document.querySelector("#resultsOfX");
            x++;
            resultsX.innerText=x;
            document.getElementById("resultsOfODiv").style.transform="scale(1.0)";
            document.getElementById("resultsOfXDiv").style.transform="scale(1.3)";
            alert("Winner is: X");
            reset();
        }
    }
    //resAniamtion();
    function clearBox(container,XO){
        XO.addEventListener("animationend", function () {
            const sp1 = document.createElement("span");
            sp1.classList.add("XO");
            const sp1_content = document.createTextNode("");
            sp1.appendChild(sp1_content);
            const parentDiv = XO.parentNode;
            parentDiv.replaceChild(sp1,XO);
        }, false);
    }
    function resAniamtion() {
        let boxes = document.getElementsByClassName("box");
        let letters = document.getElementsByClassName("XO");
        let k = 0;
        for(let i=0;i<boxes.length;i++){
            boxes[i].classList.remove('divAnimation');
            void boxes[i].offsetWidth;
            letters[i].classList.remove('divTextAnimation');
            void letters[i].offsetWidth;
        }
        boxes[0].style.animationDelay= k+"s";
        boxes[0].classList.add('divAnimation');
        letters[0].style.animationDelay= k+"s";
        letters[0].classList.add('divTextAnimation');
        letters[0].addEventListener("animationend", clearBox(boxes[0],letters[0]), false);
        
        k+=0.1;
        boxes[1].style.animationDelay= k+"s";
        boxes[1].classList.add('divAnimation');
        letters[1].style.animationDelay= k+"s";
        letters[1].classList.add('divTextAnimation');
        letters[1].addEventListener("animationend", clearBox(boxes[1],letters[1]), false);
        boxes[3].style.animationDelay= k+"s";
        boxes[3].classList.add('divAnimation');
        letters[3].style.animationDelay= k+"s";
        letters[3].classList.add('divTextAnimation');
        letters[3].addEventListener("animationend", clearBox(boxes[3],letters[3]), false);
        
        k+=0.1;
        boxes[2].style.animationDelay= k+"s";
        boxes[2].classList.add('divAnimation');
        letters[2].style.animationDelay= k+"s";
        letters[2].classList.add('divTextAnimation');
        letters[2].addEventListener("animationend", clearBox(boxes[2],letters[2]), false);
        boxes[4].style.animationDelay= k+"s";
        boxes[4].classList.add('divAnimation');
        letters[4].style.animationDelay= k+"s";
        letters[4].classList.add('divTextAnimation');
        letters[4].addEventListener("animationend", clearBox(boxes[4],letters[4]), false);
        boxes[6].style.animationDelay= k+"s";
        boxes[6].classList.add('divAnimation');
        letters[6].style.animationDelay= k+"s";
        letters[6].classList.add('divTextAnimation');
        letters[6].addEventListener("animationend", clearBox(boxes[6],letters[6]), false);
        
        k+=0.1;
        boxes[5].style.animationDelay= k+"s";
        boxes[5].classList.add('divAnimation');
        letters[5].style.animationDelay= k+"s";
        letters[5].classList.add('divTextAnimation');
        letters[5].addEventListener("animationend", clearBox(boxes[5],letters[5]), false);
        boxes[7].style.animationDelay= k+"s";
        boxes[7].classList.add('divAnimation');
        letters[7].style.animationDelay= k+"s";
        letters[7].classList.add('divTextAnimation');
        letters[7].addEventListener("animationend", clearBox(boxes[7],letters[7]), false);
        
        k+=0.1;
        boxes[8].style.animationDelay= k+"s";
        boxes[8].classList.add('divAnimation');
        letters[8].style.animationDelay= k+"s";
        letters[8].classList.add('divTextAnimation');
        letters[8].addEventListener("animationend", clearBox(boxes[8],letters[8]), false);
    }
    function pssblSquare() { 
        // if there is not any possible square to write x/o then it's a draw;
        for(let i=0;i<box.length;i++) 
        if(divText[i].textContent==="") return true;
        return false;
    }
    function reset() {
        // To reset just gameboard ( not score );
        resAniamtion();
        /* for(let i=0;i<box.length;i++)
            divText[i].textContent=''; */
    }
    function restart() {
        // to restart whole game even turns,score or colors.
        document.getElementById("resultsOfXDiv").style.transform="scale(1.0)";
        document.getElementById("resultsOfODiv").style.transform="scale(1.0)";
        document.querySelector("#resultsOfX").textContent=0;
        document.querySelector("#resultsOfO").textContent=0;
        x=0;o=0;
        reset();
    }
</script>
