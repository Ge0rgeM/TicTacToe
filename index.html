<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="game">
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
    </div>
    <div class="results">
        <div id="resultsOfXDiv">X: <span id="resultsOfX">0</span>&nbsp;&nbsp;&nbsp;</div>
        <div id="resultsOfODiv">&nbsp;&nbsp;&nbsp;<span id="resultsOfO">0</span> :O</div>
    </div>
    <div class="butns">
        <button onclick="reset()"">Restart(Just round)</button>
        <button onclick="restart()"">Restart(Whole Game)</button>
    </div>
  </body>
  <style>
    :root{
        --hue: 24;
        --sat: 100%;
        --light: 70%;
        --alpha: 1;
        --background-color: hsla(var(--hue),var(--sat),var(--light),var(--alpha));
        --button-color: hsla(calc(var(--hue)/10),var(--sat),var(--light),var(--alpha));
        --Xcolor: rgb(255,255,255);
    }
    body{
        background-color: var(--background-color);
    }
    @media only screen and (max-width: 1200px), (max-height: 768px){
        body {
            -webkit-transform:scale(0.8);
            -moz-transform:scale(0.8);
            -ms-transform:scale(0.8);
            transform:scale(0.8);
        }
    }
    @media only screen and (max-width: 800px), (max-height: 768px){
        body {
            -webkit-transform:scale(0.6);
            -moz-transform:scale(0.6);
            -ms-transform:scale(0.6);
            transform:scale(0.6);
        }
    }
    @media only screen and (max-height: 660px){
        body {
            -webkit-transform:scale(0.5);
            -moz-transform:scale(0.5);
            -ms-transform:scale(0.5);
            transform:scale(0.5);
        }
    }
    @media only screen and (height<660px){
        body {
            -webkit-transform:scale(0.4);
            -moz-transform:scale(0.4);
            -ms-transform:scale(0.4);
            transform:scale(0.4);
        }
    }
    .butns{
        width: 610px;
        display: flex;
        justify-content: center;
        margin: auto;
    }
    button{
          background-color: var(--button-color);
          font-size: 25px;
          padding: 20px;
      }
    .results {
        margin: auto;
        width: 610px;
        font-size: 30px;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .game {
      width: 610px;
      height: 610px;
      display: flex;
      flex-wrap: wrap;
      margin: auto;
    }
    .box {
      color: var(--Xcolor);
      width: 199px;
      height: 200px;
      border: 2px solid black;
      font-size: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    </style>
</html>
<script>
    let box = document.querySelectorAll(".box");
    let x=0,o=0;
    gameBoard();
    
    function gameBoard() { // runs whole mechanism
        let cnt=0;
        for(let i=0;i<box.length;i++) {
            box[i].addEventListener("click",function () {
                    if(box[i].innerText!='X'&&box[i].innerText!='O'){
                    if(cnt%2===0) 
                        box[i].innerText="X";
                    else 
                        box[i].innerText="O";
                    cnt++;
                    if(checker()) { // if checker returns true then someone has won
                        result(cnt); 
                        if(cnt%2==0) cnt=1;
                        else cnt=0;
                    }
                }
                if(pssblSquare()===false) {alert("Its a draw");reset();} 
            });
        }
    }
    function checker() { // checks ;D
        if(box[0].textContent!==''&&box[0].textContent===box[1].textContent&&box[0].textContent===box[2].textContent) return true;
        if(box[3].textContent!==''&&box[3].textContent===box[4].textContent&&box[3].textContent===box[5].textContent) return true;
        if(box[6].textContent!==''&&box[6].textContent===box[7].textContent&&box[6].textContent===box[8].textContent) return true;
        if(box[0].textContent!==''&&box[0].textContent===box[3].textContent&&box[0].textContent===box[6].textContent) return true;
        if(box[1].textContent!==''&&box[1].textContent===box[4].textContent&&box[1].textContent===box[7].textContent) return true;
        if(box[2].textContent!==''&&box[2].textContent===box[5].textContent&&box[2].textContent===box[8].textContent) return true;
        if(box[0].textContent!==''&&box[0].textContent===box[4].textContent&&box[0].textContent===box[8].textContent) return true;
        if(box[2].textContent!==''&&box[2].textContent===box[4].textContent&&box[2].textContent===box[6].textContent) return true;
        return false;
    } 
    function result(cnt) {
        if(cnt%2==0) {
            // "O" winner
            let resultsO = document.querySelector("#resultsOfO");
            o++;
            resultsO.innerText=o;
            document.getElementById("resultsOfXDiv").style.transform="scale(1.0)";
            /* document.getElementById("resultsOfXDiv").style.color="black";
            document.getElementById("resultsOfODiv").style.color="darkgreen"; */
            document.getElementById("resultsOfODiv").style.transform="scale(1.3)";
            alert("Winner Is: O");
            reset();
        }else {
            // "X" winner
            let resultsX = document.querySelector("#resultsOfX");
            x++;
            resultsX.innerText=x;
            document.getElementById("resultsOfODiv").style.transform="scale(1.0)";
            /* document.getElementById("resultsOfODiv").style.color="black";
            document.getElementById("resultsOfXDiv").style.color="darkgreen"; */
            document.getElementById("resultsOfXDiv").style.transform="scale(1.3)";
            alert("Winner is: X");
            reset();
        }
    }
    function pssblSquare() { 
        // if there is not any possible square to write x/o then it's a draw;
        for(let i=0;i<box.length;i++) 
            if(box[i].textContent==="") return true;
        return false;
    }
    function reset() {
        // To reset just gameboard ( not score );
        randColor();
        for(let i=0;i<box.length;i++) 
        box[i].textContent='';
    }
    function Xcolor(light){
        if(light>=60)
            document.documentElement.style.setProperty('--Xcolor',"rgb(0,0,0)");
        else
            document.documentElement.style.setProperty('--Xcolor',"rgb(255,255,255)");
    }
    function randColor() {
        // randomizer for body background, Hue and lightness;
        let color = Math.floor(Math.random()*360);
        let light = Math.floor(Math.random()*(90-30)+30);
        console.log(light);
        Xcolor(light);
        document.documentElement.style.setProperty('--hue',color);
        document.documentElement.style.setProperty('--light',light+"%");
    }
    function restart() {
        // to restart whole game even turns,score or colors.
        /* document.getElementById("resultsOfODiv").style.color="black";
        document.getElementById("resultsOfXDiv").style.color="black"; */
        document.getElementById("resultsOfXDiv").style.transform="scale(1.0)";
        document.getElementById("resultsOfODiv").style.transform="scale(1.0)";
        document.querySelector("#resultsOfX").textContent=0;
        document.querySelector("#resultsOfO").textContent=0;
        x=0;o=0;
        reset();
    }

    
</script>
